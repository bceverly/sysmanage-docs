<!DOCTYPE html>
<html lang="en" data-i18n-title="server_configuration.title">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="server_configuration.title" data-i18n-html>Server Configuration Guide - SysManage</title>
    <meta name="description" content="Complete configuration guide for SysManage server including security settings, database configuration, and advanced features." data-i18n-attr="content" data-i18n="server_configuration.description" data-i18n-html>
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg">
</head>
<body data-auto-header="documentation" data-auto-footer>
    <!-- Header injected automatically by components.js -->

    <main class="docs-main">
        <div class="container">
            <div class="docs-breadcrumb">
                <a href="../" data-i18n="nav.documentation" data-i18n-html>Documentation</a> > <a href="./" data-i18n="server_configuration.breadcrumb.server" data-i18n-html>Server</a> > <span data-i18n="server_configuration.breadcrumb.configuration" data-i18n-html>Configuration</span>
            </div>

            <div class="docs-header">
                <h1 data-i18n="server_configuration.header.title" data-i18n-html>Server Configuration Guide</h1>
                <p data-i18n="server_configuration.header.description" data-i18n-html>Comprehensive configuration options for customizing your SysManage server deployment.</p>
            </div>

            <div class="docs-content">
                <section class="docs-section">
                    <h2 data-i18n="server_configuration.file_locations.title" data-i18n-html>Configuration File Locations</h2>
                    <div class="config-locations">
                        <div class="location-item">
                            <h3 data-i18n="server_configuration.file_locations.linux_macos_bsd" data-i18n-html>üêß Linux/macOS/BSD</h3>
                            <code>/etc/sysmanage.yaml</code>
                        </div>
                        <div class="location-item">
                            <h3 data-i18n="server_configuration.file_locations.windows" data-i18n-html>ü™ü Windows</h3>
                            <code>C:\ProgramData\SysManage\sysmanage.yaml</code>
                        </div>
                        <div class="location-item">
                            <h3 data-i18n="server_configuration.file_locations.development" data-i18n-html>üõ†Ô∏è Development</h3>
                            <code>sysmanage-dev.yaml</code> (in project root)
                        </div>
                    </div>
                </section>

                <section class="docs-section">
                    <h2 data-i18n="server_configuration.basic.title" data-i18n-html>Basic Configuration</h2>

                    <div class="config-section">
                        <h3 data-i18n="server_configuration.basic.api_server.title" data-i18n-html>API Server Settings</h3>
                        <pre><code>api:
  host: "localhost"           # Server bind address
  port: 6443                  # API server port (HTTPS if certificates available)
  certFile: ""                # SSL certificate file path (optional)
  chainFile: ""               # SSL certificate chain file path (optional)
  keyFile: ""                 # SSL private key file path (optional)</code></pre>

                        <div class="config-notes">
                            <h4 data-i18n="server_configuration.basic.api_server.notes.title" data-i18n-html>üìù Notes</h4>
                            <ul>
                                <li data-i18n="server_configuration.basic.api_server.notes.host_binding" data-i18n-html><strong>Host binding:</strong> Use <code>0.0.0.0</code> for external access, <code>localhost</code> for local only</li>
                                <li data-i18n="server_configuration.basic.api_server.notes.ssl_certificates" data-i18n-html><strong>SSL certificates:</strong> If not provided, server falls back to HTTP</li>
                                <li data-i18n="server_configuration.basic.api_server.notes.port_selection" data-i18n-html><strong>Port selection:</strong> Ensure the port is not in use by other services</li>
                            </ul>
                        </div>
                    </div>

                    <div class="config-section">
                        <h3 data-i18n="server_configuration.basic.database.title" data-i18n-html>Database Configuration</h3>
                        <pre><code>database:
  user: "sysmanage"           # PostgreSQL username
  password: "abc123"          # PostgreSQL password (CHANGE FOR PRODUCTION!)
  host: "localhost"           # Database server hostname
  port: 5432                  # PostgreSQL port
  name: "sysmanage"           # Database name</code></pre>

                        <div class="security-warning">
                            <h4 data-i18n="server_configuration.basic.database.security_warning.title" data-i18n-html>‚ö†Ô∏è Security Warning</h4>
                            <p data-i18n="server_configuration.basic.database.security_warning.description" data-i18n-html>The example password <code>abc123</code> is for development only. <strong>Always use strong passwords in production!</strong></p>
                        </div>
                    </div>

                    <div class="config-section">
                        <h3 data-i18n="server_configuration.basic.webui.title" data-i18n-html>Web UI Settings</h3>
                        <pre><code>webui:
  host: "localhost"           # Frontend server bind address
  port: 7443                  # Frontend server port (HTTPS if certificates available)</code></pre>
                    </div>
                </section>

                <section class="docs-section">
                    <h2 data-i18n="server_configuration.security.title" data-i18n-html>Security Configuration</h2>

                    <div class="config-section">
                        <h3 data-i18n="server_configuration.security.core.title" data-i18n-html>Core Security Settings</h3>
                        <pre><code>security:
  password_salt: "YOUR_BASE64_SALT"      # Base64-encoded password salt
  admin_userid: "admin@yourdomain.com"   # Default admin user email
  admin_password: "YOUR_ADMIN_PASSWORD"  # Strong admin password
  jwt_secret: "YOUR_JWT_SECRET"          # JWT signing secret
  jwt_algorithm: "HS256"                 # JWT algorithm
  jwt_auth_timeout: 6000                 # Auth token timeout (seconds)
  jwt_refresh_timeout: 60000             # Refresh token timeout (seconds)</code></pre>

                        <div class="security-steps">
                            <h4 data-i18n="server_configuration.security.core.generating_values.title" data-i18n-html>üîê Generating Secure Values</h4>
                            <pre><code># Generate password salt (32 bytes)
openssl rand -base64 32

# Generate JWT secret (32 bytes)
openssl rand -base64 32

# Example strong admin password (change this!)
openssl rand -base64 16</code></pre>
                        </div>
                    </div>

                    <div class="config-section">
                        <h3 data-i18n="server_configuration.security.password_policy.title" data-i18n-html>Password Policy Configuration</h3>
                        <pre><code>security:
  password_policy:
    min_length: 8                        # Minimum password length
    max_length: 128                      # Maximum password length
    require_uppercase: true              # Require uppercase letters
    require_lowercase: true              # Require lowercase letters
    require_numbers: true                # Require numbers
    require_special: true                # Require special characters
    special_characters: "!@#$%^&*()_+-=[]{}|;:,.<>?"  # Allowed special chars
    min_character_types: 3               # Minimum character types required
    prevent_username_in_password: true   # Prevent username in password</code></pre>

                        <div class="config-notes">
                            <h4 data-i18n="server_configuration.security.password_policy.notes.title" data-i18n-html>üìù Password Policy Notes</h4>
                            <ul>
                                <li data-i18n="server_configuration.security.password_policy.notes.realtime_validation" data-i18n-html><strong>Real-time validation:</strong> Policies are enforced in both frontend and backend</li>
                                <li data-i18n="server_configuration.security.password_policy.notes.multilanguage" data-i18n-html><strong>Multi-language:</strong> Error messages available in all 14 supported languages</li>
                                <li data-i18n="server_configuration.security.password_policy.notes.flexible_requirements" data-i18n-html><strong>Flexible requirements:</strong> Adjust policies to meet your organization's needs</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section class="docs-section">
                    <h2 data-i18n="server_configuration.email.title" data-i18n-html>Email Configuration</h2>

                    <div class="config-section">
                        <h3 data-i18n="server_configuration.email.smtp.title" data-i18n-html>SMTP Settings</h3>
                        <pre><code>email:
  enabled: true                         # Enable/disable email functionality

  smtp:
    host: "smtp.gmail.com"              # SMTP server hostname
    port: 587                           # SMTP port (587 for STARTTLS, 465 for SSL)
    use_tls: true                       # Enable STARTTLS
    use_ssl: false                      # Enable SSL/TLS (for port 465)
    username: "your-email@gmail.com"    # SMTP authentication username
    password: "your-app-password"       # SMTP authentication password
    timeout: 30                         # Connection timeout (seconds)

  from_address: "noreply@yourdomain.com"  # Default sender email
  from_name: "SysManage System"           # Default sender name

  templates:
    subject_prefix: "[SysManage]"         # Email subject prefix</code></pre>

                        <div class="email-providers">
                            <h4 data-i18n="server_configuration.email.smtp.providers.title" data-i18n-html>üìß Common SMTP Configurations</h4>

                            <div class="provider-tabs">
                                <div class="tab-header">
                                    <button class="tab-button active" data-tab="gmail" data-i18n="server_configuration.email.smtp.providers.gmail" data-i18n-html>Gmail</button>
                                    <button class="tab-button" data-tab="office365" data-i18n="server_configuration.email.smtp.providers.office365" data-i18n-html>Office 365</button>
                                    <button class="tab-button" data-tab="exchange" data-i18n="server_configuration.email.smtp.providers.exchange" data-i18n-html>Exchange</button>
                                    <button class="tab-button" data-tab="postfix" data-i18n="server_configuration.email.smtp.providers.postfix" data-i18n-html>Postfix</button>
                                </div>

                                <div class="tab-content">
                                    <div class="tab-pane active" id="gmail">
                                        <pre><code>email:
  smtp:
    host: "smtp.gmail.com"
    port: 587
    use_tls: true
    use_ssl: false
    username: "your-email@gmail.com"
    password: "your-16-digit-app-password"</code></pre>
                                        <p data-i18n="server_configuration.email.smtp.providers.gmail_note" data-i18n-html><strong>Note:</strong> Requires 2FA and App Password. Visit <a href="https://support.google.com/accounts/answer/185833" target="_blank">Google App Passwords</a> for setup.</p>
                                    </div>

                                    <div class="tab-pane" id="office365">
                                        <pre><code>email:
  smtp:
    host: "smtp-mail.outlook.com"
    port: 587
    use_tls: true
    use_ssl: false
    username: "your-email@yourdomain.com"
    password: "your-password"</code></pre>
                                    </div>

                                    <div class="tab-pane" id="exchange">
                                        <pre><code>email:
  smtp:
    host: "mail.yourdomain.com"
    port: 587
    use_tls: true
    use_ssl: false
    username: "your-email@yourdomain.com"
    password: "your-password"</code></pre>
                                    </div>

                                    <div class="tab-pane" id="postfix">
                                        <pre><code>email:
  smtp:
    host: "localhost"
    port: 25
    use_tls: false
    use_ssl: false
    username: ""    # Empty for localhost/no-auth
    password: ""    # Empty for localhost/no-auth</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="docs-section">
                    <h2 data-i18n="server_configuration.certificates.title" data-i18n-html>Certificate Management</h2>

                    <div class="config-section">
                        <h3 data-i18n="server_configuration.certificates.storage.title" data-i18n-html>Certificate Storage</h3>
                        <pre><code>certificates:
  path: "/etc/sysmanage/certs/"         # Certificate storage directory

  # Server certificates for HTTPS
  server_cert: "server.crt"             # Server certificate filename
  server_key: "server.key"              # Server private key filename

  # CA certificates for mTLS
  ca_cert: "ca.crt"                     # CA certificate filename
  ca_key: "ca.key"                      # CA private key filename</code></pre>

                        <div class="cert-permissions">
                            <h4 data-i18n="server_configuration.certificates.storage.permissions.title" data-i18n-html>üîí Required Permissions</h4>
                            <ul>
                                <li data-i18n="server_configuration.certificates.storage.permissions.directory" data-i18n-html><strong>Certificate directory:</strong> <code>0755</code> (owner rwx, group/others rx)</li>
                                <li data-i18n="server_configuration.certificates.storage.permissions.private_keys" data-i18n-html><strong>Private keys:</strong> <code>0600</code> (owner read/write only)</li>
                                <li data-i18n="server_configuration.certificates.storage.permissions.certificates" data-i18n-html><strong>Certificates:</strong> <code>0644</code> (owner rw, others read)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="config-section">
                        <h3 data-i18n="server_configuration.certificates.mtls.title" data-i18n-html>mTLS Configuration</h3>
                        <p data-i18n="server_configuration.certificates.mtls.description" data-i18n-html>Mutual TLS settings are automatically managed by the server. When hosts are approved, client certificates are generated and stored in the certificate directory.</p>

                        <div class="mtls-workflow">
                            <h4 data-i18n="server_configuration.certificates.mtls.workflow.title" data-i18n-html>üîÑ mTLS Workflow</h4>
                            <ol>
                                <li data-i18n="server_configuration.certificates.mtls.workflow.step1" data-i18n-html><strong>Host Registration:</strong> Agent registers with pending status</li>
                                <li data-i18n="server_configuration.certificates.mtls.workflow.step2" data-i18n-html><strong>Manual Approval:</strong> Administrator approves host in web interface</li>
                                <li data-i18n="server_configuration.certificates.mtls.workflow.step3" data-i18n-html><strong>Certificate Generation:</strong> Server generates unique client certificate</li>
                                <li data-i18n="server_configuration.certificates.mtls.workflow.step4" data-i18n-html><strong>Secure Authentication:</strong> Subsequent connections use mTLS</li>
                            </ol>
                        </div>
                    </div>
                </section>

                <section class="docs-section">
                    <h2 data-i18n="server_configuration.advanced.title" data-i18n-html>Advanced Features</h2>

                    <div class="config-section">
                        <h3 data-i18n="server_configuration.advanced.discovery.title" data-i18n-html>Agent Discovery Service</h3>
                        <pre><code>discovery:
  enabled: true                         # Enable UDP discovery service
  port: 31337                           # UDP discovery port
  announcement_port: 31338              # UDP announcement port
  announcement_interval: 30             # Seconds between announcements</code></pre>

                        <div class="config-notes">
                            <h4 data-i18n="server_configuration.advanced.discovery.service.title" data-i18n-html>üì° Discovery Service</h4>
                            <p data-i18n="server_configuration.advanced.discovery.service.description" data-i18n-html>Allows agents to automatically discover and configure themselves with available servers on the network.</p>
                        </div>
                    </div>

                    <div class="config-section">
                        <h3 data-i18n="server_configuration.advanced.logging.title" data-i18n-html>Logging Configuration</h3>
                        <pre><code>logging:
  level: "INFO"                         # DEBUG, INFO, WARNING, ERROR, CRITICAL
  file: "/var/log/sysmanage/server.log" # Log file path (optional)
  format: "detailed"                    # Log format: simple, detailed, json
  max_size: "10MB"                      # Maximum log file size
  backup_count: 5                       # Number of backup log files</code></pre>
                    </div>

                    <div class="config-section">
                        <h3 data-i18n="server_configuration.advanced.performance.title" data-i18n-html>Performance Tuning</h3>
                        <pre><code>performance:
  workers: 4                            # Number of worker processes
  max_connections: 1000                 # Maximum concurrent connections
  keepalive_timeout: 30                 # Keep-alive timeout (seconds)
  websocket_timeout: 300                # WebSocket timeout (seconds)

  # Database connection pooling
  db_pool_size: 10                      # Database connection pool size
  db_max_overflow: 20                   # Maximum overflow connections</code></pre>
                    </div>
                </section>

                <section class="docs-section">
                    <h2 data-i18n="server_configuration.permissions.title" data-i18n-html>File Permissions and Security</h2>

                    <div class="permission-guide">
                        <h3 data-i18n="server_configuration.permissions.directory.title" data-i18n-html>Required Directory Structure</h3>
                        <pre><code># Create required directories with proper permissions
sudo mkdir -p /etc/sysmanage/certs
sudo mkdir -p /var/log/sysmanage

# Set ownership (replace 'sysmanage' with your service user)
sudo chown -R sysmanage:sysmanage /etc/sysmanage
sudo chown -R sysmanage:sysmanage /var/log/sysmanage

# Set permissions
sudo chmod 755 /etc/sysmanage
sudo chmod 755 /etc/sysmanage/certs
sudo chmod 755 /var/log/sysmanage
sudo chmod 600 /etc/sysmanage.yaml</code></pre>

                        <div class="security-checklist">
                            <h4 data-i18n="server_configuration.permissions.security_checklist.title" data-i18n-html>üõ°Ô∏è Security Checklist</h4>
                            <ul>
                                <li data-i18n="server_configuration.permissions.security_checklist.config_file" data-i18n-html>‚úÖ Configuration file is readable only by service user</li>
                                <li data-i18n="server_configuration.permissions.security_checklist.cert_directory" data-i18n-html>‚úÖ Certificate directory has restricted access</li>
                                <li data-i18n="server_configuration.permissions.security_checklist.private_keys" data-i18n-html>‚úÖ Private keys are protected with 0600 permissions</li>
                                <li data-i18n="server_configuration.permissions.security_checklist.strong_passwords" data-i18n-html>‚úÖ Strong passwords and secrets are used</li>
                                <li data-i18n="server_configuration.permissions.security_checklist.jwt_rotation" data-i18n-html>‚úÖ JWT secrets are regularly rotated</li>
                                <li data-i18n="server_configuration.permissions.security_checklist.db_credentials" data-i18n-html>‚úÖ Database credentials are unique and strong</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section class="docs-section">
                    <h2 data-i18n="server_configuration.environment.title" data-i18n-html>Environment Variables</h2>
                    <p data-i18n="server_configuration.environment.description" data-i18n-html>Configuration can also be set via environment variables (overrides YAML file):</p>

                    <pre><code># Database configuration
export SYSMANAGE_DB_HOST="localhost"
export SYSMANAGE_DB_PORT="5432"
export SYSMANAGE_DB_USER="sysmanage"
export SYSMANAGE_DB_PASSWORD="your_password"
export SYSMANAGE_DB_NAME="sysmanage"

# API configuration
export SYSMANAGE_API_HOST="0.0.0.0"
export SYSMANAGE_API_PORT="6443"

# Security configuration
export SYSMANAGE_JWT_SECRET="your_jwt_secret"
export SYSMANAGE_ADMIN_PASSWORD="your_admin_password"</code></pre>
                </section>

                <section class="docs-section">
                    <h2 data-i18n="server_configuration.testing.title" data-i18n-html>Testing Configuration</h2>

                    <div class="test-steps">
                        <h3 data-i18n="server_configuration.testing.validation.title" data-i18n-html>Validation Steps</h3>
                        <ol>
                            <li data-i18n="server_configuration.testing.validation.syntax" data-i18n-html><strong>Configuration Syntax:</strong>
                                <pre><code># Test YAML syntax
python -c "import yaml; yaml.safe_load(open('/etc/sysmanage.yaml'))"</code></pre>
                            </li>
                            <li data-i18n="server_configuration.testing.validation.database" data-i18n-html><strong>Database Connection:</strong>
                                <pre><code># Test database connectivity
PGPASSWORD=your_password psql -U sysmanage -d sysmanage -h localhost -c "SELECT 1;"</code></pre>
                            </li>
                            <li data-i18n="server_configuration.testing.validation.email" data-i18n-html><strong>Email Configuration:</strong>
                                <p>Use the Settings ‚Üí Integrations page in the web interface to test email configuration.</p>
                            </li>
                            <li data-i18n="server_configuration.testing.validation.ssl" data-i18n-html><strong>SSL Certificates:</strong>
                                <pre><code># Verify certificate validity
openssl x509 -in /etc/sysmanage/certs/server.crt -text -noout</code></pre>
                            </li>
                        </ol>
                    </div>
                </section>

                <div class="docs-navigation">
                    <div class="nav-links">
                        <a href="installation.html" class="nav-link" data-i18n="server_configuration.navigation.installation" data-i18n-html>‚Üê Installation Guide</a>
                        <a href="deployment.html" class="nav-link" data-i18n="server_configuration.navigation.deployment" data-i18n-html>Deployment Guide ‚Üí</a>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- Footer injected automatically by components.js -->    <script src="/assets/js/components.js"></script>
    <script src="/assets/js/i18n.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/navbar.js"></script>
</body>
</html>