<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Host Management API - SysManage</title>
    <meta name="description" content="SysManage Host Management API documentation for managing hosts, agents, and system operations.">
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="icon" type="image/svg+xml" href="../../assets/images/favicon.svg">
</head>
<body>
    <header class="site-header">
        <nav class="navbar">
            <div class="container">
                <div class="nav-brand">
                    <a href="../../">
                        <img src="../../assets/images/sysmanage-logo.svg" alt="SysManage" class="logo">
                    </a>
                </div>
                <div class="nav-menu">
                    <a href="../../#features" class="nav-link">Features</a>
                    <a href="../../#getting-started" class="nav-link">Getting Started</a>
                    <a href="../" class="nav-link active">Documentation</a>
                    <a href="https://github.com/bceverly/sysmanage" class="nav-link" target="_blank">GitHub</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="docs-main">
        <div class="container">
            <div class="docs-breadcrumb">
                <a href="../">Documentation</a> > <a href="./">API Reference</a> > <span>Host Management</span>
            </div>

            <div class="docs-header">
                <h1>Host Management API</h1>
                <p>Complete host and agent management including registration, system operations, and data collection.</p>
            </div>

            <div class="docs-content">
                <section class="overview">
                    <h2>Overview</h2>
                    <p>The Host Management API provides comprehensive control over registered hosts and their agents. This includes system information collection, remote operations, hardware updates, and fleet management capabilities.</p>
                </section>

                <section class="endpoint-section">
                    <h2>Fleet Management</h2>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method get">GET</span>
                            <code>/api/v1/fleet/status</code>
                        </div>
                        <p>Get overall fleet status and statistics.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "total_hosts": 150,
  "online_hosts": 142,
  "offline_hosts": 8,
  "pending_approval": 3,
  "agents_with_errors": 2,
  "last_updated": "2024-01-01T12:00:00Z"
}</code></pre>
                        </div>
                    </div>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method get">GET</span>
                            <code>/api/v1/fleet/agents</code>
                        </div>
                        <p>List all registered agents in the fleet.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "agents": [
    {
      "hostname": "web-server-01",
      "id": "uuid",
      "status": "online",
      "last_seen": "2024-01-01T12:00:00Z",
      "platform": "linux",
      "version": "1.0.0",
      "ip_address": "192.168.1.100"
    }
  ]
}</code></pre>
                        </div>
                    </div>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method get">GET</span>
                            <code>/api/v1/fleet/agent/{hostname}</code>
                        </div>
                        <p>Get detailed information about a specific agent.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Path Parameters</h4>
                        <ul>
                            <li><code>hostname</code> (string) - Hostname of the target agent</li>
                        </ul>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "hostname": "web-server-01",
  "id": "uuid",
  "status": "online",
  "last_seen": "2024-01-01T12:00:00Z",
  "platform": "linux",
  "os_version": "Ubuntu 22.04 LTS",
  "agent_version": "1.0.0",
  "ip_address": "192.168.1.100",
  "cpu_count": 4,
  "memory_total": "8 GB",
  "disk_usage": {
    "total": "100 GB",
    "used": "45 GB",
    "free": "55 GB"
  },
  "uptime": "15 days, 3 hours, 22 minutes"
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="endpoint-section">
                    <h2>Host Operations</h2>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method post">POST</span>
                            <code>/api/v1/fleet/agent/{hostname}/command</code>
                        </div>
                        <p>Execute a command on a specific host.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Path Parameters</h4>
                        <ul>
                            <li><code>hostname</code> (string) - Target hostname</li>
                        </ul>

                        <h4>Request Body</h4>
                        <div class="code-block">
                            <pre><code>{
  "command": "ls -la /var/log",
  "timeout": 30
}</code></pre>
                        </div>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "execution_id": "uuid",
  "status": "executed",
  "stdout": "total 156\ndrwxr-xr-x 8 root root 4096 Jan  1 12:00 .\n...",
  "stderr": "",
  "exit_code": 0,
  "execution_time": 0.245
}</code></pre>
                        </div>
                    </div>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method post">POST</span>
                            <code>/api/v1/host/reboot/{host_id}</code>
                        </div>
                        <p>Reboot a specific host.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Path Parameters</h4>
                        <ul>
                            <li><code>host_id</code> (string) - UUID of the target host</li>
                        </ul>

                        <h4>Request Body</h4>
                        <div class="code-block">
                            <pre><code>{
  "force": false,
  "delay_seconds": 60,
  "message": "System maintenance reboot"
}</code></pre>
                        </div>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "message": "Reboot command sent successfully",
  "scheduled_time": "2024-01-01T12:01:00Z",
  "execution_id": "uuid"
}</code></pre>
                        </div>
                    </div>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method post">POST</span>
                            <code>/api/v1/host/shutdown/{host_id}</code>
                        </div>
                        <p>Shutdown a specific host.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Path Parameters</h4>
                        <ul>
                            <li><code>host_id</code> (string) - UUID of the target host</li>
                        </ul>

                        <h4>Request Body</h4>
                        <div class="code-block">
                            <pre><code>{
  "force": false,
  "delay_seconds": 60,
  "message": "Scheduled maintenance shutdown"
}</code></pre>
                        </div>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "message": "Shutdown command sent successfully",
  "scheduled_time": "2024-01-01T12:01:00Z",
  "execution_id": "uuid"
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="endpoint-section">
                    <h2>Hardware and System Information</h2>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method post">POST</span>
                            <code>/api/v1/host/{host_id}/update-hardware</code>
                        </div>
                        <p>Request hardware information update from a host.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Path Parameters</h4>
                        <ul>
                            <li><code>host_id</code> (string) - UUID of the target host</li>
                        </ul>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "message": "Hardware update request sent",
  "request_id": "uuid",
  "estimated_completion": "2024-01-01T12:02:00Z"
}</code></pre>
                        </div>
                    </div>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method get">GET</span>
                            <code>/api/v1/host/{host_id}/storage</code>
                        </div>
                        <p>Get storage information for a specific host.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "storage_devices": [
    {
      "device": "/dev/sda1",
      "mount_point": "/",
      "filesystem": "ext4",
      "total_size": "100 GB",
      "used_space": "45 GB",
      "free_space": "55 GB",
      "usage_percentage": 45
    }
  ],
  "last_updated": "2024-01-01T12:00:00Z"
}</code></pre>
                        </div>
                    </div>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method get">GET</span>
                            <code>/api/v1/host/{host_id}/network</code>
                        </div>
                        <p>Get network interface information for a specific host.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "network_interfaces": [
    {
      "interface": "eth0",
      "ip_address": "192.168.1.100",
      "netmask": "255.255.255.0",
      "gateway": "192.168.1.1",
      "mac_address": "00:11:22:33:44:55",
      "status": "up",
      "speed": "1000 Mbps"
    }
  ],
  "last_updated": "2024-01-01T12:00:00Z"
}</code></pre>
                        </div>
                    </div>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method get">GET</span>
                            <code>/api/v1/host/{host_id}/users</code>
                        </div>
                        <p>Get user accounts on a specific host.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "users": [
    {
      "username": "admin",
      "uid": 1000,
      "gid": 1000,
      "home_directory": "/home/admin",
      "shell": "/bin/bash",
      "last_login": "2024-01-01T08:30:00Z"
    }
  ],
  "last_updated": "2024-01-01T12:00:00Z"
}</code></pre>
                        </div>
                    </div>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method get">GET</span>
                            <code>/api/v1/host/{host_id}/groups</code>
                        </div>
                        <p>Get user groups on a specific host.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "groups": [
    {
      "name": "sudo",
      "gid": 27,
      "members": ["admin", "user1"]
    }
  ],
  "last_updated": "2024-01-01T12:00:00Z"
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="endpoint-section">
                    <h2>Software and Package Information</h2>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method post">POST</span>
                            <code>/api/v1/host/refresh/software/{host_id}</code>
                        </div>
                        <p>Request software inventory refresh for a specific host.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Path Parameters</h4>
                        <ul>
                            <li><code>host_id</code> (string) - UUID of the target host</li>
                        </ul>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "message": "Software refresh request sent",
  "request_id": "uuid",
  "estimated_completion": "2024-01-01T12:05:00Z"
}</code></pre>
                        </div>
                    </div>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method get">GET</span>
                            <code>/api/v1/host/{host_id}/software</code>
                        </div>
                        <p>Get installed software packages on a specific host.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "packages": [
    {
      "name": "nginx",
      "version": "1.18.0",
      "architecture": "amd64",
      "status": "installed",
      "description": "High performance web server",
      "install_date": "2024-01-01T10:00:00Z"
    }
  ],
  "total_packages": 1847,
  "last_updated": "2024-01-01T12:00:00Z"
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="endpoint-section">
                    <h2>Bulk Operations</h2>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method post">POST</span>
                            <code>/api/v1/fleet/broadcast/command</code>
                        </div>
                        <p>Execute a command across multiple hosts simultaneously.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Request Body</h4>
                        <div class="code-block">
                            <pre><code>{
  "command": "systemctl status nginx",
  "hostnames": ["web-01", "web-02", "web-03"],
  "timeout": 30,
  "parallel": true
}</code></pre>
                        </div>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "batch_id": "uuid",
  "total_hosts": 3,
  "results": [
    {
      "hostname": "web-01",
      "status": "completed",
      "exit_code": 0,
      "stdout": "● nginx.service - A high performance web server...",
      "execution_time": 0.123
    }
  ]
}</code></pre>
                        </div>
                    </div>

                    <div class="endpoint">
                        <div class="endpoint-header">
                            <span class="method post">POST</span>
                            <code>/api/v1/hosts/request-hardware-update</code>
                        </div>
                        <p>Request hardware information update from multiple hosts.</p>
                        <div class="auth-required">🔒 Authentication Required</div>

                        <h4>Request Body</h4>
                        <div class="code-block">
                            <pre><code>{
  "host_ids": ["uuid1", "uuid2", "uuid3"],
  "include_storage": true,
  "include_network": true,
  "include_users": false
}</code></pre>
                        </div>

                        <h4>Response (200 OK)</h4>
                        <div class="code-block">
                            <pre><code>{
  "batch_id": "uuid",
  "total_hosts": 3,
  "requests_sent": 3,
  "estimated_completion": "2024-01-01T12:05:00Z"
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="notes">
                    <h2>Important Notes</h2>
                    <ul>
                        <li>All endpoints require valid JWT authentication</li>
                        <li>Host operations may take time to complete - use execution IDs to track progress</li>
                        <li>Bulk operations are rate-limited to prevent system overload</li>
                        <li>Hardware information updates are cached and updated periodically</li>
                        <li>Some operations require administrative privileges</li>
                    </ul>
                </section>
            </div>

            <div class="docs-footer">
                <div class="docs-navigation">
                    <h3>Quick Navigation</h3>
                    <div class="nav-links">
                        <a href="authentication.html" class="nav-link">← Authentication</a>
                        <a href="packages.html" class="nav-link">Package Management →</a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2024 SysManage. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../../assets/js/main.js"></script>
    <script src="../../assets/js/i18n.js"></script>
</body>
</html>