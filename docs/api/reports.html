<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports API - SysManage</title>
    <meta name="description" content="Generate and access system reports, inventories, and analytics data through the SysManage Reports API.">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg">
</head>
<body data-auto-header="documentation" data-auto-footer>
    <!-- Header injected automatically by components.js -->

    <main class="docs-main">
        <div class="container">
            <div class="docs-breadcrumb">
                <a href="../">Documentation</a> > <a href="./">API Reference</a> > <span>Reports API</span>
            </div>

            <div class="docs-header">
                <h1>Reports API</h1>
                <p>Generate and access comprehensive system reports, inventory data, and analytics through programmatic interfaces.</p>
            </div>

            <div class="docs-content">
                <section class="docs-overview">
                    <h2>Overview</h2>
                    <p>The Reports API provides access to various system reports including host inventories, package status, security summaries, and performance analytics. Reports can be generated in multiple formats and scheduled for regular delivery.</p>

                    <div class="api-base-info">
                        <h3>Base URL</h3>
                        <div class="code-block">
                            <code>/api/v1/reports</code>
                        </div>

                        <h3>Authentication</h3>
                        <p>All endpoints require valid JWT authentication with appropriate permissions.</p>
                    </div>
                </section>

                <section class="report-types">
                    <h2>Report Types</h2>

                    <div class="report-category">
                        <h3>Infrastructure Reports</h3>
                        <ul>
                            <li><strong>Host Inventory:</strong> Complete hardware and software inventory</li>
                            <li><strong>Package Status:</strong> Installed packages and available updates</li>
                            <li><strong>System Performance:</strong> Performance metrics and trends</li>
                            <li><strong>Capacity Planning:</strong> Resource utilization and growth projections</li>
                        </ul>
                    </div>

                    <div class="report-category">
                        <h3>Security Reports</h3>
                        <ul>
                            <li><strong>Vulnerability Assessment:</strong> Security vulnerabilities and patches</li>
                            <li><strong>Compliance Status:</strong> Security compliance and policy adherence</li>
                            <li><strong>User Activity:</strong> User access patterns and administrative actions</li>
                            <li><strong>Security Events:</strong> Security incidents and alerts</li>
                        </ul>
                    </div>

                    <div class="report-category">
                        <h3>Operational Reports</h3>
                        <ul>
                            <li><strong>System Health:</strong> Overall system status and uptime</li>
                            <li><strong>Maintenance Summary:</strong> Maintenance activities and schedules</li>
                            <li><strong>Backup Status:</strong> Backup completion and integrity reports</li>
                            <li><strong>Change Log:</strong> System changes and modifications</li>
                        </ul>
                    </div>
                </section>

                <section class="api-endpoints">
                    <h2>API Endpoints</h2>

                    <div class="endpoint">
                        <h3>Get Available Reports</h3>
                        <div class="endpoint-info">
                            <span class="method GET">GET</span>
                            <span class="url">/api/v1/reports</span>
                        </div>
                        <p>Retrieve a list of all available report types and their descriptions.</p>

                        <h4>Request</h4>
                        <pre><code>GET /api/v1/reports
Authorization: Bearer {jwt_token}
Content-Type: application/json</code></pre>

                        <h4>Response</h4>
                        <pre><code>{
  "reports": [
    {
      "id": "host_inventory",
      "name": "Host Inventory",
      "description": "Complete hardware and software inventory for all hosts",
      "category": "infrastructure",
      "formats": ["json", "csv", "pdf"],
      "parameters": ["host_ids", "include_software", "include_hardware"]
    },
    {
      "id": "package_status",
      "name": "Package Status",
      "description": "Package installation status and available updates",
      "category": "infrastructure",
      "formats": ["json", "csv", "excel"],
      "parameters": ["host_ids", "package_names", "show_updates"]
    }
  ]
}</code></pre>
                    </div>

                    <div class="endpoint">
                        <h3>Generate Report</h3>
                        <div class="endpoint-info">
                            <span class="method POST">POST</span>
                            <span class="url">/api/v1/reports/generate</span>
                        </div>
                        <p>Generate a new report with specified parameters and format.</p>

                        <h4>Request</h4>
                        <pre><code>POST /api/v1/reports/generate
Authorization: Bearer {jwt_token}
Content-Type: application/json

{
  "report_type": "host_inventory",
  "format": "pdf",
  "parameters": {
    "host_ids": ["host-uuid-1", "host-uuid-2"],
    "include_software": true,
    "include_hardware": true,
    "date_range": {
      "start": "2024-01-01",
      "end": "2024-01-31"
    }
  },
  "delivery": {
    "method": "download",
    "email": "admin@example.com"
  }
}</code></pre>

                        <h4>Response</h4>
                        <pre><code>{
  "report_id": "rpt_123456789",
  "status": "generating",
  "estimated_completion": "2024-01-15T10:35:00Z",
  "download_url": null,
  "created_at": "2024-01-15T10:30:00Z"
}</code></pre>
                    </div>

                    <div class="endpoint">
                        <h3>Get Report Status</h3>
                        <div class="endpoint-info">
                            <span class="method GET">GET</span>
                            <span class="url">/api/v1/reports/{report_id}/status</span>
                        </div>
                        <p>Check the generation status of a specific report.</p>

                        <h4>Request</h4>
                        <pre><code>GET /api/v1/reports/rpt_123456789/status
Authorization: Bearer {jwt_token}</code></pre>

                        <h4>Response</h4>
                        <pre><code>{
  "report_id": "rpt_123456789",
  "status": "completed",
  "progress": 100,
  "download_url": "/api/v1/reports/rpt_123456789/download",
  "expires_at": "2024-01-22T10:30:00Z",
  "file_size": 2048576,
  "generated_at": "2024-01-15T10:35:22Z"
}</code></pre>
                    </div>

                    <div class="endpoint">
                        <h3>Download Report</h3>
                        <div class="endpoint-info">
                            <span class="method GET">GET</span>
                            <span class="url">/api/v1/reports/{report_id}/download</span>
                        </div>
                        <p>Download the generated report file.</p>

                        <h4>Request</h4>
                        <pre><code>GET /api/v1/reports/rpt_123456789/download
Authorization: Bearer {jwt_token}</code></pre>

                        <h4>Response</h4>
                        <p>Returns the report file with appropriate Content-Type header based on format.</p>
                        <pre><code>Content-Type: application/pdf
Content-Disposition: attachment; filename="host_inventory_2024-01-15.pdf"
Content-Length: 2048576

[Binary file content]</code></pre>
                    </div>

                    <div class="endpoint">
                        <h3>Host Inventory Report</h3>
                        <div class="endpoint-info">
                            <span class="method GET">GET</span>
                            <span class="url">/api/v1/reports/hosts/inventory</span>
                        </div>
                        <p>Get real-time host inventory data in JSON format.</p>

                        <h4>Query Parameters</h4>
                        <ul>
                            <li><code>host_ids</code> - Comma-separated list of host UUIDs</li>
                            <li><code>include_software</code> - Include software inventory (default: true)</li>
                            <li><code>include_hardware</code> - Include hardware details (default: true)</li>
                            <li><code>format</code> - Response format: json, csv (default: json)</li>
                        </ul>

                        <h4>Request</h4>
                        <pre><code>GET /api/v1/reports/hosts/inventory?include_software=true&include_hardware=true
Authorization: Bearer {jwt_token}</code></pre>

                        <h4>Response</h4>
                        <pre><code>{
  "report_meta": {
    "generated_at": "2024-01-15T10:30:00Z",
    "total_hosts": 25,
    "parameters": {
      "include_software": true,
      "include_hardware": true
    }
  },
  "hosts": [
    {
      "id": "host-uuid-1",
      "hostname": "web-server-01",
      "ip_address": "192.168.1.10",
      "os": {
        "name": "Ubuntu",
        "version": "22.04 LTS",
        "kernel": "5.15.0-91-generic"
      },
      "hardware": {
        "cpu": {
          "model": "Intel(R) Xeon(R) CPU E5-2686 v4 @ 2.30GHz",
          "cores": 4,
          "threads": 8
        },
        "memory": {
          "total": "16GB",
          "available": "12GB"
        },
        "storage": [
          {
            "device": "/dev/sda1",
            "size": "100GB",
            "used": "45GB",
            "filesystem": "ext4"
          }
        ]
      },
      "software": {
        "packages": [
          {
            "name": "nginx",
            "version": "1.18.0-6ubuntu14.4",
            "status": "installed"
          },
          {
            "name": "postgresql",
            "version": "14.9-0ubuntu0.22.04.1",
            "status": "installed"
          }
        ],
        "services": [
          {
            "name": "nginx",
            "status": "active",
            "enabled": true
          }
        ]
      },
      "last_seen": "2024-01-15T10:29:45Z",
      "agent_version": "1.0.0"
    }
  ]
}</code></pre>
                    </div>

                    <div class="endpoint">
                        <h3>Package Status Report</h3>
                        <div class="endpoint-info">
                            <span class="method GET">GET</span>
                            <span class="url">/api/v1/reports/packages/status</span>
                        </div>
                        <p>Get comprehensive package status across all hosts.</p>

                        <h4>Query Parameters</h4>
                        <ul>
                            <li><code>host_ids</code> - Filter by specific hosts</li>
                            <li><code>package_names</code> - Filter by specific packages</li>
                            <li><code>show_updates</code> - Include available updates (default: true)</li>
                            <li><code>security_only</code> - Show only security updates (default: false)</li>
                        </ul>

                        <h4>Request</h4>
                        <pre><code>GET /api/v1/reports/packages/status?show_updates=true&security_only=false
Authorization: Bearer {jwt_token}</code></pre>

                        <h4>Response</h4>
                        <pre><code>{
  "report_meta": {
    "generated_at": "2024-01-15T10:30:00Z",
    "total_hosts": 25,
    "total_packages": 1250,
    "packages_with_updates": 89,
    "security_updates": 12
  },
  "summary": {
    "by_status": {
      "up_to_date": 1161,
      "updates_available": 89,
      "security_updates": 12,
      "unknown": 0
    },
    "by_package_manager": {
      "apt": 800,
      "yum": 300,
      "brew": 100,
      "chocolatey": 50
    }
  },
  "packages": [
    {
      "name": "nginx",
      "hosts_count": 15,
      "versions": [
        {
          "version": "1.18.0-6ubuntu14.4",
          "hosts": 12,
          "status": "up_to_date"
        },
        {
          "version": "1.18.0-6ubuntu14.3",
          "hosts": 3,
          "status": "update_available",
          "security_update": false
        }
      ]
    },
    {
      "name": "openssl",
      "hosts_count": 25,
      "versions": [
        {
          "version": "3.0.2-0ubuntu1.12",
          "hosts": 20,
          "status": "up_to_date"
        },
        {
          "version": "3.0.2-0ubuntu1.10",
          "hosts": 5,
          "status": "security_update_available",
          "security_update": true,
          "cve_references": ["CVE-2023-5678", "CVE-2023-5679"]
        }
      ]
    }
  ]
}</code></pre>
                    </div>

                    <div class="endpoint">
                        <h3>Security Report</h3>
                        <div class="endpoint-info">
                            <span class="method GET">GET</span>
                            <span class="url">/api/v1/reports/security/vulnerabilities</span>
                        </div>
                        <p>Get security vulnerability assessment across all hosts.</p>

                        <h4>Query Parameters</h4>
                        <ul>
                            <li><code>severity</code> - Filter by severity: critical, high, medium, low</li>
                            <li><code>host_ids</code> - Filter by specific hosts</li>
                            <li><code>include_patched</code> - Include patched vulnerabilities (default: false)</li>
                        </ul>

                        <h4>Request</h4>
                        <pre><code>GET /api/v1/reports/security/vulnerabilities?severity=critical,high
Authorization: Bearer {jwt_token}</code></pre>

                        <h4>Response</h4>
                        <pre><code>{
  "report_meta": {
    "generated_at": "2024-01-15T10:30:00Z",
    "total_vulnerabilities": 45,
    "by_severity": {
      "critical": 3,
      "high": 12,
      "medium": 20,
      "low": 10
    }
  },
  "vulnerabilities": [
    {
      "cve_id": "CVE-2023-5678",
      "severity": "critical",
      "score": 9.8,
      "description": "Remote code execution vulnerability in OpenSSL",
      "affected_packages": ["openssl", "libssl3"],
      "affected_hosts": [
        {
          "id": "host-uuid-1",
          "hostname": "web-server-01",
          "package": "openssl",
          "current_version": "3.0.2-0ubuntu1.10",
          "fixed_version": "3.0.2-0ubuntu1.12",
          "patch_available": true
        }
      ],
      "references": [
        "https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-5678",
        "https://ubuntu.com/security/notices/USN-6234-1"
      ],
      "published_date": "2023-12-15T00:00:00Z",
      "discovered_date": "2024-01-10T08:00:00Z"
    }
  ]
}</code></pre>
                    </div>

                    <div class="endpoint">
                        <h3>Performance Report</h3>
                        <div class="endpoint-info">
                            <span class="method GET">GET</span>
                            <span class="url">/api/v1/reports/performance/summary</span>
                        </div>
                        <p>Get system performance summary and trends.</p>

                        <h4>Query Parameters</h4>
                        <ul>
                            <li><code>time_range</code> - Time range: 1h, 24h, 7d, 30d (default: 24h)</li>
                            <li><code>host_ids</code> - Filter by specific hosts</li>
                            <li><code>metrics</code> - Specific metrics: cpu, memory, disk, network</li>
                        </ul>

                        <h4>Request</h4>
                        <pre><code>GET /api/v1/reports/performance/summary?time_range=24h&metrics=cpu,memory
Authorization: Bearer {jwt_token}</code></pre>

                        <h4>Response</h4>
                        <pre><code>{
  "report_meta": {
    "generated_at": "2024-01-15T10:30:00Z",
    "time_range": "24h",
    "total_hosts": 25,
    "metrics_included": ["cpu", "memory"]
  },
  "summary": {
    "cpu": {
      "average_utilization": 35.2,
      "peak_utilization": 89.5,
      "hosts_over_threshold": 3,
      "threshold": 80.0
    },
    "memory": {
      "average_utilization": 62.8,
      "peak_utilization": 95.2,
      "hosts_over_threshold": 1,
      "threshold": 90.0
    }
  },
  "top_consumers": {
    "cpu": [
      {
        "host_id": "host-uuid-3",
        "hostname": "app-server-01",
        "average_cpu": 78.5,
        "peak_cpu": 89.5
      }
    ],
    "memory": [
      {
        "host_id": "host-uuid-5",
        "hostname": "db-server-01",
        "average_memory": 87.2,
        "peak_memory": 95.2
      }
    ]
  },
  "alerts_triggered": [
    {
      "host_id": "host-uuid-5",
      "hostname": "db-server-01",
      "metric": "memory",
      "threshold": 90.0,
      "value": 95.2,
      "timestamp": "2024-01-15T09:45:00Z"
    }
  ]
}</code></pre>
                    </div>

                    <div class="endpoint">
                        <h3>Scheduled Reports</h3>
                        <div class="endpoint-info">
                            <span class="method GET">GET</span>
                            <span class="url">/api/v1/reports/scheduled</span>
                        </div>
                        <p>Manage scheduled report generation and delivery.</p>

                        <h4>Request</h4>
                        <pre><code>GET /api/v1/reports/scheduled
Authorization: Bearer {jwt_token}</code></pre>

                        <h4>Response</h4>
                        <pre><code>{
  "scheduled_reports": [
    {
      "id": "sched_001",
      "name": "Weekly Security Report",
      "report_type": "security_vulnerabilities",
      "schedule": "0 8 * * 1",
      "parameters": {
        "severity": "critical,high",
        "format": "pdf"
      },
      "delivery": {
        "method": "email",
        "recipients": ["security@example.com", "admin@example.com"]
      },
      "enabled": true,
      "last_run": "2024-01-08T08:00:00Z",
      "next_run": "2024-01-15T08:00:00Z"
    }
  ]
}</code></pre>
                    </div>

                    <div class="endpoint">
                        <h3>Create Scheduled Report</h3>
                        <div class="endpoint-info">
                            <span class="method POST">POST</span>
                            <span class="url">/api/v1/reports/scheduled</span>
                        </div>
                        <p>Create a new scheduled report.</p>

                        <h4>Request</h4>
                        <pre><code>POST /api/v1/reports/scheduled
Authorization: Bearer {jwt_token}
Content-Type: application/json

{
  "name": "Monthly Host Inventory",
  "report_type": "host_inventory",
  "schedule": "0 9 1 * *",
  "parameters": {
    "include_software": true,
    "include_hardware": true,
    "format": "excel"
  },
  "delivery": {
    "method": "email",
    "recipients": ["operations@example.com"]
  },
  "enabled": true
}</code></pre>

                        <h4>Response</h4>
                        <pre><code>{
  "id": "sched_002",
  "name": "Monthly Host Inventory",
  "status": "created",
  "next_run": "2024-02-01T09:00:00Z",
  "created_at": "2024-01-15T10:30:00Z"
}</code></pre>
                    </div>
                </section>

                <section class="report-formats">
                    <h2>Report Formats</h2>

                    <div class="format-support">
                        <h3>Supported Formats</h3>
                        <ul>
                            <li><strong>JSON:</strong> Structured data for API consumption</li>
                            <li><strong>CSV:</strong> Comma-separated values for spreadsheet import</li>
                            <li><strong>Excel:</strong> Microsoft Excel format with multiple sheets</li>
                            <li><strong>PDF:</strong> Formatted reports for presentation and printing</li>
                            <li><strong>HTML:</strong> Web-viewable reports with interactive elements</li>
                        </ul>
                    </div>

                    <div class="format-examples">
                        <h3>Format-Specific Features</h3>

                        <h4>PDF Reports</h4>
                        <ul>
                            <li>Professional formatting with company branding</li>
                            <li>Charts, graphs, and visual elements</li>
                            <li>Executive summary and detailed sections</li>
                            <li>Automatic table of contents and page numbering</li>
                        </ul>

                        <h4>Excel Reports</h4>
                        <ul>
                            <li>Multiple worksheets for different data types</li>
                            <li>Pivot tables and charts</li>
                            <li>Conditional formatting for quick analysis</li>
                            <li>Data validation and filtering</li>
                        </ul>

                        <h4>CSV Reports</h4>
                        <ul>
                            <li>Raw data export for analysis tools</li>
                            <li>UTF-8 encoding for international characters</li>
                            <li>Configurable delimiters and quoting</li>
                            <li>Optimized for large datasets</li>
                        </ul>
                    </div>
                </section>

                <section class="error-handling">
                    <h2>Error Handling</h2>

                    <div class="error-codes">
                        <h3>Common Error Responses</h3>

                        <h4>400 Bad Request</h4>
                        <pre><code>{
  "error": "invalid_parameters",
  "message": "Invalid report type specified",
  "details": {
    "valid_types": ["host_inventory", "package_status", "security_vulnerabilities"]
  }
}</code></pre>

                        <h4>404 Not Found</h4>
                        <pre><code>{
  "error": "report_not_found",
  "message": "Report with ID 'rpt_invalid' not found",
  "report_id": "rpt_invalid"
}</code></pre>

                        <h4>422 Processing Error</h4>
                        <pre><code>{
  "error": "report_generation_failed",
  "message": "Failed to generate report due to data inconsistency",
  "details": {
    "failed_hosts": ["host-uuid-1", "host-uuid-2"],
    "reason": "Agent communication timeout"
  }
}</code></pre>
                    </div>
                </section>

                <section class="code-examples">
                    <h2>Code Examples</h2>

                    <div class="example">
                        <h3>Python Example</h3>
                        <pre><code>import requests
import time

# Generate a security vulnerabilities report
def generate_security_report(api_base, token):
    headers = {
        'Authorization': f'Bearer {token}',
        'Content-Type': 'application/json'
    }

    # Request report generation
    report_request = {
        'report_type': 'security_vulnerabilities',
        'format': 'pdf',
        'parameters': {
            'severity': 'critical,high',
            'include_patched': False
        }
    }

    response = requests.post(
        f'{api_base}/reports/generate',
        headers=headers,
        json=report_request
    )

    if response.status_code == 200:
        report_data = response.json()
        report_id = report_data['report_id']

        # Poll for completion
        while True:
            status_response = requests.get(
                f'{api_base}/reports/{report_id}/status',
                headers=headers
            )

            status_data = status_response.json()

            if status_data['status'] == 'completed':
                # Download the report
                download_response = requests.get(
                    f'{api_base}/reports/{report_id}/download',
                    headers=headers
                )

                with open(f'security_report_{report_id}.pdf', 'wb') as f:
                    f.write(download_response.content)

                print(f"Report downloaded: security_report_{report_id}.pdf")
                break

            elif status_data['status'] == 'failed':
                print("Report generation failed")
                break

            time.sleep(5)  # Wait 5 seconds before checking again

    else:
        print(f"Failed to generate report: {response.status_code}")

# Usage
api_base = "https://your-server.example.com/api/v1"
token = "your_jwt_token_here"
generate_security_report(api_base, token)</code></pre>
                    </div>

                    <div class="example">
                        <h3>JavaScript Example</h3>
                        <pre><code>// Generate and download host inventory report
async function generateHostInventoryReport(apiBase, token) {
    const headers = {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
    };

    try {
        // Generate report
        const generateResponse = await fetch(`${apiBase}/reports/generate`, {
            method: 'POST',
            headers: headers,
            body: JSON.stringify({
                report_type: 'host_inventory',
                format: 'excel',
                parameters: {
                    include_software: true,
                    include_hardware: true
                }
            })
        });

        const reportData = await generateResponse.json();
        const reportId = reportData.report_id;

        // Poll for completion
        const pollInterval = setInterval(async () => {
            const statusResponse = await fetch(
                `${apiBase}/reports/${reportId}/status`,
                { headers }
            );

            const statusData = await statusResponse.json();

            if (statusData.status === 'completed') {
                clearInterval(pollInterval);

                // Create download link
                const downloadUrl = `${apiBase}/reports/${reportId}/download`;
                const link = document.createElement('a');
                link.href = downloadUrl;
                link.download = `host_inventory_${new Date().toISOString().split('T')[0]}.xlsx`;
                link.click();

                console.log('Report download initiated');
            } else if (statusData.status === 'failed') {
                clearInterval(pollInterval);
                console.error('Report generation failed');
            }
        }, 5000);

    } catch (error) {
        console.error('Error generating report:', error);
    }
}

// Usage
const apiBase = 'https://your-server.example.com/api/v1';
const token = 'your_jwt_token_here';
generateHostInventoryReport(apiBase, token);</code></pre>
                    </div>
                </section>
            </div>

            <div class="docs-footer">
                <div class="docs-navigation">
                    <h3>Quick Navigation</h3>
                    <div class="nav-links">
                        <a href="monitoring.html" class="nav-link">← Monitoring API</a>
                        <a href="users.html" class="nav-link">User Management API →</a>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- Footer injected automatically by components.js -->    <script src="/assets/js/components.js"></script>
    <script src="/assets/js/i18n.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/navbar.js"></script>
</body>
</html>